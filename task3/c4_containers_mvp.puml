@startuml
 !includeurl https://raw.githubusercontent.com/RicardoNiepel/C4-PlantUML/master/C4_Container.puml
 title MVP — Открытие депозитов - Диаграмма контейнеров
 ' === Акторы ===
 Person(newClient, "Новый клиент", "Заполняет заявку на сайте для открытия депозита")
 Person(ibClient, "Клиент интернет-банка", "Подаёт заявку на депозит через интернет-банк")
 Person(callCenter, "Менеджер колл-центра", "Обрабатывает заявки с сайта")
 Person(frontOffice, "Менеджер фронт-офиса", "Создаёт заявку в АБС и загружает документы")
 Person(creditDept, "Сотрудник кредитного отдела", "Предоставляет данные о кредитном риске")
 ' === Система банка ===
 System_Boundary(bankSystem, "Банковская система") {
    Container(webIB, "Сайт / Интернет-банк", "Веб-приложение", "Позволяет клиенту просматривать депозиты и подавать заявки")
     Container(smsService, "Сервис СМС", "Внешний сервис", "Отправка СМС-кодов для подтверждения операций интернет-банка")
     Container(backOfficeDeposit, "Бэк-офис депозитов", "Сервис обработки заявок", "Обрабатывает заявки, управляет персональными ставками")
     Container(abs, "АБС банка", "Core banking system", "Хранение заявок, создание депозитов и документов")
     }
' === Внешние связи ===
System_Ext(telecom, "Телеком оператор", "Отправляет СМС клиентам")
' === Отношения ===
Rel(newClient, webIB, "Просмотр депозитов и подача заявки (ФИО, телефон)", "HTTPS / шифрование")
Rel(ibClient, webIB, "Просмотр депозитов с персональными ставками\nПодача заявки с подтверждением СМС", "HTTPS / шифрование")
Rel(webIB, smsService, "Запрос на отправку СМС-кода", "REST / JSON")
Rel(smsService, telecom, "Отправка СМС-кода клиенту", "API / SMPP")
Rel(telecom, ibClient, "Доставка СМС-кода клиенту", "SMS")
Rel(ibClient, telecom, "Подтверждение СМС-кода", "SMS")
Rel(telecom, smsService, "Подтверждение доставки/кода", "API / SMPP")
Rel(webIB, backOfficeDeposit, "Передача заявки", "HTTPS / REST")
Rel(callCenter, backOfficeDeposit, "Обработка заявки, согласование условий", "Внутренняя система банка")
Rel(backOfficeDeposit, creditDept, " Запрашивает данные по кредитному риску (через email/Excel)", "Email / XLS")
Rel(backOfficeDeposit, frontOffice, "Передача окончательной заявки на создание депозита", "REST / внутренняя система")
Rel(frontOffice, abs, "Создание заявки на депозит\nЗагрузка подписанных документов", "API / JDBC")
Rel(abs, newClient, "СМС-уведомление о подтверждении/открытии депозита", "SMS")
Rel(abs, ibClient, "СМС-уведомление о подтверждении/открытии депозита", "SMS")
  @enduml